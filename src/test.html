<doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CIFROT</title>
    <link rel="stylesheet" href="CIFROT.css">
</head> 
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="js/testing.js"></script>
<body>
    <div class="header">
        <a class="header" href="index.html">Home</a>
        <a class="header" href="about.html">About</a>
        <a class="header" href="directions.html">Directions</a>
        <a class="header" href="test.html">Test</a>
    </div>
    <div class="body"></div>
        <div id="testIntro">
            <input type="text" id="testName" placeholder="Test name...">
            <label for="increment">Increment (Hz):
                <input type="number" id="increment" value="200" min="1" max="1000"
                    style="width: 85px;", 
                    onchange="if (this.value < 1) this.value = 1; if (this.value > 1000) this.value = 1000;"
                >
            </label>
            <button id="testStart" onclick="startVolumeCalibration()">Start Test</button>
        </div>
        <dialog class="testing">
            <p>
                Adjust the device volume to a medium level.
            </p>
            <button onclick="stopVolumeCalibration()">Next</button>
        </dialog>
        <dialog class="testing">
            <p>
                A one minute pitch cycle will begin. 
                This minimizes the perceived loudness changing during the test.
            </p>
            <button onclick="resetTesting()">Stop</button>
        </dialog>
        <dialog class="testing">
            <p>
                What are you testing?
            </p>
            <div class="testSelect">
                <button id="leftTest" onclick='test(3, "rgb(0, 0, 255)")'>
                    Left CI
                </button>
                <button id="bothTest" onclick='test(4, "rgb(255, 0, 255)")'>
                    Both CIs
                </button>
                <button id="rightTest" onclick='test(5, "rgb(255, 0, 0)")'>
                    Right CI
                </button>
            </div>
        </dialog>
        <dialog class="testing">
            <h2>
                Testing Left CI
            </h2>
            <div class="exportOptions">
                <button onclick="downloadImage()">Save Image</button>
                <button onclick="downloadCSV()">Save CSV</button>
                <button onclick="resetTesting()">Restart</button>
            </div>
            <div class="inTestDirections">
                <span class="startIndicator">
                    Press "Enter" to begin.
                </span>
                Press "Space" when the pitch becomes inaudible or "0" if inaudible from the start.
            </div>
            <canvas class="frChart"></canvas>
        </dialog>
        <dialog class="testing">
            <h2>
                Testing Both CIs
            </h2>
            <div class="exportOptions">
                <button onclick="downloadImage()">Save Image</button>
                <button onclick="downloadCSV()">Save CSV</button>
                <button onclick="resetTesting()">Restart</button>
            </div>
            <div class="inTestDirections">
                <span class="startIndicator">
                    Press "Enter" to begin.
                </span>
                Press "←" when the pitch becomes inaudible on the left CI last, "→" if the right CI is last, "Space" when indiscernible, or "0" if inaudible from the start.
            </div>
            <canvas class="frChart"></canvas>
        </dialog>
        <dialog class="testing">
            <h2>
                Testing Right CI
            </h2>
            <div class="exportOptions">
                <button onclick="downloadImage()">Save Image</button>
                <button onclick="downloadCSV()">Save CSV</button>
                <button onclick="resetTesting()">Restart</button>
            </div>
            <div class="inTestDirections">
                <span class="startIndicator">
                    Press "Enter" to begin.
                </span>
                Press "Space" when the pitch becomes inaudible or "0" if inaudible from the start
            </div>
            <canvas class="frChart"></canvas>
        </dialog>
    </div>
</body>
</html>